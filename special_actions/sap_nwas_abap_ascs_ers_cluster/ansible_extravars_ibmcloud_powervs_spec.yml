---
#### Ansible Dictionary for host specifications ####
sap_vm_provision_ibmcloud_powervs_host_specifications_dictionary:

  xsmall_256gb:

    nwas-ascs: # Hostname, must be 13 characters or less
      sap_host_type: nwas_ascs # hana_primary, hana_secondary, nwas_ascs, nwas_ers, nwas_pas, nwas_aas
      virtual_machine_profile: "cnp-2x32" # 16 vCPU x 32GB DRAM, alt: use custom SAP instance profile sizes using cnp-2x16 (2 Power Cores [16 vCPU] x 16GB) and above
      ibmcloud_powervs_hardware_machine_type: e980 # IBM Power hardware machine type (MT) used to host the Virtual Machine
      disable_ip_anti_spoofing: true

      sap_storage_setup_sid: "{{ sap_system_sid }}"

      # ASCS and ERS have to be present for Simple Mount cluster.
      sap_storage_setup_nwas_abap_ascs_instance_nr: "{{ sap_system_nwas_abap_ascs_instance_nr }}"
      sap_storage_setup_nwas_abap_ers_instance_nr: "{{ sap_system_nwas_abap_ers_instance_nr }}"

      sap_storage_setup_host_type:
        - nwas_abap_ascs
        - nwas_abap_ers

      storage_definition:

        - name: usr_sap
          mountpoint: /usr/sap
          nfs_path: /usr/sap                                              # subdirectory path on the NFS server
          nfs_server: "{{ sap_vm_provision_nfs_mount_point | default('') }}"               # NFS server and parent directory (e.g. nfs.com:/share1). default: {{ sap_storage_setup_nfs_server }}
          nfs_filesystem_type: "{{ sap_vm_provision_nfs_mount_point_type | default('') }}" # default: {{ sap_storage_setup_nfs_filesystem_type }}
          nfs_mount_options: "{{ sap_vm_provision_nfs_mount_point_opts | default('') }}"   # default: {{ sap_storage_setup_nfs_mount_options }}

        - name: usr_sap_trans
          mountpoint: /usr/sap/trans
          nfs_path: /usr/sap/trans                                                       # subdirectory path on the NFS server
          nfs_server: "{{ sap_vm_provision_nfs_mount_point_separate_sap_transport_dir | default('') }}"   # NFS server and parent directory (e.g. nfs.com:/share1). default: {{ sap_storage_setup_nfs_server }}
          nfs_filesystem_type: "{{ sap_vm_provision_nfs_mount_point_type | default('') }}"                # default: {{ sap_storage_setup_nfs_filesystem_type }}
          nfs_mount_options: "{{ sap_vm_provision_nfs_mount_point_opts | default('') }}"                  # default: {{ sap_storage_setup_nfs_mount_options }}

        - name: sapmnt
          mountpoint: /sapmnt
          nfs_path: /sapmnt                                               # subdirectory path on the NFS server
          nfs_server: "{{ sap_vm_provision_nfs_mount_point | default('') }}"               # NFS server and parent directory (e.g. nfs.com:/share1). default: {{ sap_storage_setup_nfs_server }}
          nfs_filesystem_type: "{{ sap_vm_provision_nfs_mount_point_type | default('') }}" # default: {{ sap_storage_setup_nfs_filesystem_type }}
          nfs_mount_options: "{{ sap_vm_provision_nfs_mount_point_opts | default('') }}"   # default: {{ sap_storage_setup_nfs_mount_options }}

        # See SAP Note 1597355 - Swap-space recommendation for Linux
        - name: swap # nwas
          disk_size: 64
          disk_type: tier3               # Does NOT use Burst IOPS storage
          filesystem_type: swap          # must be swap filesystem

        - name: software
          mountpoint: /software
          disk_size: 100                 # size in GB, integer
          disk_type: tier3               # Does NOT use Burst IOPS storage
          filesystem_type: xfs           # default: xfs

    nwas-ers: # Hostname, must be 13 characters or less
      sap_host_type: nwas_ers # hana_primary, hana_secondary, nwas_ascs, nwas_ers, nwas_pas, nwas_aas
      virtual_machine_profile: "cnp-2x32" # 16 vCPU x 32GB DRAM, alt: use custom SAP instance profile sizes using cnp-2x16 (2 Power Cores [16 vCPU] x 16GB) and above
      ibmcloud_powervs_hardware_machine_type: e980 # IBM Power hardware machine type (MT) used to host the Virtual Machine
      disable_ip_anti_spoofing: true

      sap_storage_setup_sid: "{{ sap_system_sid }}"

      # ASCS and ERS have to be present for Simple Mount cluster.
      sap_storage_setup_nwas_abap_ascs_instance_nr: "{{ sap_system_nwas_abap_ascs_instance_nr }}"
      sap_storage_setup_nwas_abap_ers_instance_nr: "{{ sap_system_nwas_abap_ers_instance_nr }}"

      sap_storage_setup_host_type:
        - nwas_abap_ascs
        - nwas_abap_ers

      storage_definition:

        - name: usr_sap
          mountpoint: /usr/sap
          nfs_path: /usr/sap                                              # subdirectory path on the NFS server
          nfs_server: "{{ sap_vm_provision_nfs_mount_point | default('') }}"               # NFS server and parent directory (e.g. nfs.com:/share1). default: {{ sap_storage_setup_nfs_server }}
          nfs_filesystem_type: "{{ sap_vm_provision_nfs_mount_point_type | default('') }}" # default: {{ sap_storage_setup_nfs_filesystem_type }}
          nfs_mount_options: "{{ sap_vm_provision_nfs_mount_point_opts | default('') }}"   # default: {{ sap_storage_setup_nfs_mount_options }}

        - name: usr_sap_trans
          mountpoint: /usr/sap/trans
          nfs_path: /usr/sap/trans                                                       # subdirectory path on the NFS server
          nfs_server: "{{ sap_vm_provision_nfs_mount_point_separate_sap_transport_dir | default('') }}"   # NFS server and parent directory (e.g. nfs.com:/share1). default: {{ sap_storage_setup_nfs_server }}
          nfs_filesystem_type: "{{ sap_vm_provision_nfs_mount_point_type | default('') }}"                # default: {{ sap_storage_setup_nfs_filesystem_type }}
          nfs_mount_options: "{{ sap_vm_provision_nfs_mount_point_opts | default('') }}"                  # default: {{ sap_storage_setup_nfs_mount_options }}

        - name: sapmnt
          mountpoint: /sapmnt
          nfs_path: /sapmnt                                               # subdirectory path on the NFS server
          nfs_server: "{{ sap_vm_provision_nfs_mount_point | default('') }}"               # NFS server and parent directory (e.g. nfs.com:/share1). default: {{ sap_storage_setup_nfs_server }}
          nfs_filesystem_type: "{{ sap_vm_provision_nfs_mount_point_type | default('') }}" # default: {{ sap_storage_setup_nfs_filesystem_type }}
          nfs_mount_options: "{{ sap_vm_provision_nfs_mount_point_opts | default('') }}"   # default: {{ sap_storage_setup_nfs_mount_options }}

        # See SAP Note 1597355 - Swap-space recommendation for Linux
        - name: swap # nwas
          disk_size: 64
          disk_type: tier3               # Does NOT use Burst IOPS storage
          filesystem_type: swap          # must be swap filesystem

        - name: software
          mountpoint: /software
          disk_size: 100                 # size in GB, integer
          disk_type: tier3               # Does NOT use Burst IOPS storage
          filesystem_type: xfs           # default: xfs
